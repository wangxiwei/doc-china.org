
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <title>Request API · nodejs实战</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.1.1">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="output.html" />
    
    
    <link rel="prev" href="./" />
    

           <!-- baidu tongji-->
        <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "//hm.baidu.com/hm.js?627126cddcd63947fdd8f5b3c73ab19e";
              var s = document.getElementsByTagName("script")[0];
              s.parentNode.insertBefore(hm, s);
            })();
        </script>
        <!-- baidu tongji-->

            <!-- GA -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-79861528-2', 'auto');
            ga('send', 'pageview');

        </script>
        <!-- GA -->

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="/" target="_blank" class="custom-link">首页</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../npm-package/">
            
                <a href="../npm-package/">
            
                    
                    Develop a NPM package
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../npm-package/validator.html">
            
                <a href="../npm-package/validator.html">
            
                    
                    Develop node-validator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../npm-package/test.html">
            
                <a href="../npm-package/test.html">
            
                    
                    Write test cases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../npm-package/manage.html">
            
                <a href="../npm-package/manage.html">
            
                    
                    Manage NPM package
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    Node.js command line tool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1" data-path="request.html">
            
                <a href="request.html">
            
                    
                    Request API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="output.html">
            
                <a href="output.html">
            
                    
                    Beautify the output
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="finish.html">
            
                <a href="finish.html">
            
                    
                    Complete the tool
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../express/">
            
                <a href="../express/">
            
                    
                    Web development with Express
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../express/express.html">
            
                <a href="../express/express.html">
            
                    
                    Use Express
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../express/develop.html">
            
                <a href="../express/develop.html">
            
                    
                    Develop the Express app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../express/deploy.html">
            
                <a href="../express/deploy.html">
            
                    
                    Server deploy
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../appendix/">
            
                <a href="../appendix/">
            
                    
                    Appendix
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../appendix/basic.html">
            
                <a href="../appendix/basic.html">
            
                    
                    Node.js basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../appendix/npm.html">
            
                <a href="../appendix/npm.html">
            
                    
                    NPM basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../appendix/reference.html">
            
                <a href="../appendix/reference.html">
            
                    
                    Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../appendix/update.html">
            
                <a href="../appendix/update.html">
            
                    
                    Update
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Request API</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="request-api">Request API</h1>
<p>The core feature of our command line tool is to request the API of Youdao dic. After handling with the response of the API, we could display the results to the terminal.</p>
<h2 id="use-request">Use request</h2>
<p><a href="https://www.npmjs.com/package/request" target="_blank">request</a> is one of the most popular module on NPM, it has been downloaded for 20~30 million time per day.</p>
<p>Just like Ajax methods of jQuery used in Front-end development and AFNetworking in iOS development, <strong>request</strong> is widely used in Node.js applications for requesting APIs.</p>
<p>And it is extremely easy and simple to understand its usage, following is the simplest way to use it:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;request&apos;</span>);

request(<span class="hljs-string">&apos;http://www.google.com&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, response, body</span>) </span>{
    <span class="hljs-keyword">if</span> (!error &amp;&amp; response.statusCode == <span class="hljs-number">200</span>) {
        <span class="hljs-built_in">console</span>.log(body);
    }
});
</code></pre>
<h2 id="youdao-dic">Youdao dic</h2>
<p>Youdao dic provides a <a href="http://fanyi.youdao.com/openapi" target="_blank">Open platform</a> for developers to register and apply for API services.</p>
<p>The most common way to request API is quite simple, we could just add parameters in the URL and request the API with GET method:</p>
<pre><code>http://fanyi.youdao.com/openapi.do?keyfrom=node-translator&amp;key=2058911035&amp;type=data&amp;doctype=json&amp;version=1.1&amp;q=test
</code></pre><p>It&apos;s convenient for us to find what the parameters mean in the documentations.</p>
<p>Next, we can have a try to call the API using request, we are going to get the Chinese meaning of the word &apos;test&apos;:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> request = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;request&apos;</span>);

request(<span class="hljs-string">&apos;http://fanyi.youdao.com/openapi.do?keyfrom=node-translator&amp;key=2058911035&amp;type=data&amp;doctype=json&amp;version=1.1&amp;q=test&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error, response, body</span>) </span>{
    <span class="hljs-keyword">if</span> (!error &amp;&amp; response.statusCode == <span class="hljs-number">200</span>) {
        <span class="hljs-built_in">console</span>.log(body);
    }
});
</code></pre>
<p>Assuming the codes above has been saved as a JavaScirpt file named <code>request-test.js</code>, we could run it using <code>node request-test.js</code> and get the following result:</p>
<pre><code>{&quot;translation&quot;:[&quot;&#x6D4B;&#x8BD5;&quot;],&quot;basic&quot;:{&quot;us-phonetic&quot;:&quot;t&#x25B;st&quot;,&quot;phonetic&quot;:&quot;test&quot;,&quot;uk-phonetic&quot;:&quot;test&quot;,&quot;explains&quot;:[&quot;n. &#x8BD5;&#x9A8C;&#xFF1B;&#x68C0;&#x9A8C;&quot;,&quot;vt. &#x8BD5;&#x9A8C;&#xFF1B;&#x6D4B;&#x8BD5;&quot;,&quot;vi. &#x8BD5;&#x9A8C;&#xFF1B;&#x6D4B;&#x8BD5;&quot;,&quot;n. (Test)&#x4EBA;&#x540D;&#xFF1B;(&#x82F1;)&#x7279;&#x65AF;&#x7279;&quot;]},&quot;query&quot;:&quot;test&quot;,&quot;errorCode&quot;:0,&quot;web&quot;:[{&quot;value&quot;:[&quot;&#x6D4B;&#x8BD5;&quot;,&quot;&#x8BD5;&#x9A8C;&quot;,&quot;&#x68C0;&#x9A8C;&quot;],&quot;key&quot;:&quot;test&quot;},{&quot;value&quot;:[&quot;&#x6D4B;&#x8BD5;&#x5DE5;&#x7A0B;&#x5E08;&quot;,&quot;&#x6D4B;&#x8BD5;&#x5458;&quot;,&quot;&#x8F6F;&#x4EF6;&#x6D4B;&#x8BD5;&#x5DE5;&#x7A0B;&#x5E08;&quot;],&quot;key&quot;:&quot;Test engineer&quot;},{&quot;value&quot;:[&quot;&#x786C;&#x5EA6;&#x8BD5;&#x9A8C;&quot;,&quot;&#x786C;&#x5EA6;&#x6D4B;&#x8BD5;&quot;,&quot;&#x786C;&#x5EA6;&#x5B9E;&#x9A8C;&quot;],&quot;key&quot;:&quot;hardness test&quot;}]}
</code></pre><p>That&apos;s it! The JSON contents in the result body is what we need for our tool.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Node.js command line tool">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="output.html" class="navigation navigation-next " aria-label="Next page: Beautify the output">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Request API","level":"1.3.1","depth":2,"next":{"title":"Beautify the output","level":"1.3.2","depth":2,"path":"cli/output.md","ref":"cli/output.md","articles":[]},"previous":{"title":"Node.js command line tool","level":"1.3","depth":1,"path":"cli/README.md","ref":"cli/README.md","articles":[{"title":"Request API","level":"1.3.1","depth":2,"path":"cli/request.md","ref":"cli/request.md","articles":[]},{"title":"Beautify the output","level":"1.3.2","depth":2,"path":"cli/output.md","ref":"cli/output.md","articles":[]},{"title":"Complete the tool","level":"1.3.3","depth":2,"path":"cli/finish.md","ref":"cli/finish.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"nodejs实战","language":"en","links":{"sidebar":{"首页":"/"}},"gitbook":"*","description":"nodejs 学习入门教程"},"file":{"path":"cli/request.md","mtime":"2016-06-20T01:38:57.098Z","type":"markdown"},"gitbook":{"version":"3.1.1","time":"2016-07-05T02:00:32.958Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

